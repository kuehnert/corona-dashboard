(this["webpackJsonpcorona-meter"]=this["webpackJsonpcorona-meter"]||[]).push([[0],{12:function(e,a,t){e.exports={countryHeader:"CountryData_countryHeader__8c1j8"}},31:function(e,a,t){e.exports={rootContainer:"Dashboard_rootContainer__1HTOq"}},32:function(e,a,t){e.exports=t(65)},5:function(e,a,t){e.exports={number:"NumberCard_number__1rkk8",left:"NumberCard_left__1bkGy",right:"NumberCard_right__teMx2"}},64:function(e,a,t){},65:function(e,a,t){"use strict";t.r(a);t(33),t(34),t(35);var n=t(0),r=t.n(n),c=t(11),o=t.n(c),l=t(3),i=t(9),s=t.n(i),u=t(18),d=t(10),m=t(14),v=t(19),f=t.n(v),b=t(67),h=t(68),p=Object(m.b)({name:"corona",initialState:{latestGlobalData:null,historicData:{},selectedCountries:["DE","GB","US","FR","CA"],daysToShow:7},reducers:{fetchLatestGlobalSuccess:function(e,a){e.latestGlobalData=a.payload},fetchCountryHistoricDataSuccess:function(e,a){var t=a.payload,n=t.countrycode.iso2,r=t.timeseries;r=r.map((function(e){return Object(d.a)({},e,{acute:e.confirmed-e.recovered-e.deaths})}));for(var c=1;c<r.length;c++){var o=r[c-1],l=r[c];r[c]=Object(d.a)({},r[c],{acuteDelta:o.acute-l.acute,confirmedDelta:o.confirmed-l.confirmed,deathsDelta:o.deaths-l.deaths,recoveredDelta:o.recovered-l.recovered})}for(var i=0;i<r.length;i++){var s=r[i].confirmed/2;if(0===s)break;for(var u=i+1;u<r.length&&r[u].confirmed>s;)u+=1;u<r.length?r[i].doublingtime=u-i:r[i].doublingtime=0}t.timeseries=r,e.historicData[n]=t}}}),E=p.actions,y=E.fetchLatestGlobalSuccess,g=E.fetchCountryHistoricDataSuccess,j=p.reducer,D=t(12),O=t.n(D),C=t(13),N=t(7),w=t.n(N),S=t(8),k=t(5),_=t.n(k);var x=function(e){var a,t,n=e.value,c=e.positiveGood,o=void 0!==c&&c,l=e.withSign,i=void 0!==l&&l,s=e.withColor,u=void 0!==s&&s,d=e.percentage,m="";i&&n&&n>=0&&(m="+"),null==n?a="-":void 0!==d&&d?(t=n,a="".concat(Math.round(1e3*t)/10," %")):a=n.toLocaleString();var v=u&&(o&&"+"===m||!o&&""===m),f=u&&(o&&""===m||!o&&"+"===m);return r.a.createElement("span",{className:w()({good:v,bad:f})},m,a)},G=function(e){var a=e.countrycode,t=e.label,c=e.name,o=e.value,i=Object(n.useState)([]),s=Object(C.a)(i,2),u=s[0],d=s[1],m=Object(l.c)((function(e){return e.corona.historicData&&e.corona.historicData[a]})),v=Object(l.c)((function(e){return e.corona})).daysToShow;Object(n.useEffect)((function(){if(null!=m&&null!=c){for(var e=new Array(7),a=1;a<v;a++)e.push({date:m.timeseries[a].date,value:m.timeseries[a][c],delta:m.timeseries[a][c+"Delta"]});d(e)}}),[m,c]);var f=null;return o?f=o:m&&c&&m.timeseries[0][c]&&(f=m.timeseries[0][c]),r.a.createElement("div",{className:"p-col"},r.a.createElement(S.Card,{className:""},r.a.createElement("div",{className:_.a.label},t),r.a.createElement("div",{className:_.a.number},r.a.createElement(x,{value:f})),u.map((function(e){return r.a.createElement("div",{key:e.date,className:"p-grid"},r.a.createElement("div",{className:w()("p-col-5",_.a.left)},r.a.createElement(x,{value:e.delta,withSign:!0,withColor:!0,positiveGood:"recovered"===c})),r.a.createElement("div",{className:w()("p-col-7",_.a.right)},r.a.createElement(x,{value:e.value})))}))))},H=function(e){var a=e.countrycode,t=e.label,c=e.name,o=(e.value,Object(n.useState)([])),i=Object(C.a)(o,2),s=i[0],u=i[1],d=Object(l.c)((function(e){return e.corona})).daysToShow,m=Object(l.c)((function(e){return e.corona.historicData&&e.corona.historicData[a]}));Object(n.useEffect)((function(){if(null!=m&&null!=c){for(var e=new Array(7),a=1;a<d;a++)e.push({date:m.timeseries[a].date,value:m.timeseries[a][c]});u(e)}}),[m]);var v=null;return m&&(v=m.timeseries[0].doublingtime),r.a.createElement("div",{className:"p-col"},r.a.createElement(S.Card,{className:""},r.a.createElement("div",{className:_.a.label},t),r.a.createElement("div",{className:_.a.number},r.a.createElement(x,{value:v})," days"),s.map((function(e){return r.a.createElement("div",{key:e.date,className:"p-grid p-justify-center"},r.a.createElement("div",{className:w()("p-col",_.a.right)},r.a.createElement(x,{value:e.value})," days"))}))))},I=function(e){var a=e.countrycode,t=Object(l.b)(),c=Object(l.c)((function(e){return e.corona.historicData[a]}));return Object(n.useEffect)((function(){var e;t((e=a,function(){var a=Object(u.a)(s.a.mark((function a(t,n){var r,c,o,l,i;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.a.get("https://wuhan-coronavirus-api.laeyoung.endpoint.ainize.ai/jhu-edu/timeseries?iso2=".concat(e.toUpperCase(),"&onlyCountries=true"));case 3:c=a.sent,o=c.data[0],l=o.timeseries,i=Object.keys(l).map((function(e){var a=b.a(e,"MM/dd/yy",new Date),t=h.a(a,{representation:"date"});return Object(d.a)({date:t},l[e])})).sort((function(e,a){return a.date.localeCompare(e.date)})),r=Object(d.a)({},o,{timeseries:i}),a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(0),console.log("error:",a.t0),a.abrupt("return");case 14:t(g(r));case 15:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()))}),[]),r.a.createElement("div",{className:"ui container"},r.a.createElement("h2",{className:O.a.countryHeader},(null===c||void 0===c?void 0:c.countryregion)||a),r.a.createElement("div",{className:"p-grid"},r.a.createElement(G,{countrycode:a,name:"acute",label:"Acute"}),r.a.createElement(G,{countrycode:a,name:"confirmed",label:"Confirmed"}),r.a.createElement(G,{countrycode:a,name:"recovered",label:"Recovered"}),r.a.createElement(G,{countrycode:a,name:"deaths",label:"Deaths"}),r.a.createElement(H,{countrycode:a,label:"Doubling Time",name:"doublingtime"})))},A=t(31),M=t.n(A),T=function(e){var a=e.label,t=e.name,n=e.value,c=e.percentage,o=Object(l.c)((function(e){return e.corona.latestGlobalData})),i=n||null!=o&&null!=t&&o[t]||null;return r.a.createElement("div",{className:"p-col"},r.a.createElement(S.Card,null,r.a.createElement("div",{className:_.a.label},a),r.a.createElement("div",{className:_.a.number},r.a.createElement(x,{value:i,percentage:c}))))},z=function(){var e=Object(l.c)((function(e){return e.corona.latestGlobalData}));return r.a.createElement("div",{className:"ui container"},r.a.createElement("h2",{className:O.a.countryHeader},"World-Wide"),r.a.createElement("div",{className:"p-grid"},r.a.createElement(T,{label:"Confirmed",name:"confirmed"}),r.a.createElement(T,{label:"Recovered",name:"recovered"}),r.a.createElement(T,{label:"Deaths",name:"deaths"}),r.a.createElement(T,{label:"Fatality Rate",value:e&&e.deaths/e.confirmed||null,percentage:!0})))},L=function(){var e=Object(l.b)(),a=Object(l.c)((function(e){return e.corona})).selectedCountries;return Object(n.useEffect)((function(){e(function(){var e=Object(u.a)(s.a.mark((function e(a){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("https://wuhan-coronavirus-api.laeyoung.endpoint.ainize.ai/jhu-edu/brief");case 3:n=e.sent,t=n.data,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),console.log("error:",e.t0),e.abrupt("return");case 11:a(y(t));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}())}),[]),r.a.createElement("div",{className:M.a.rootContainer},r.a.createElement("h1",null,"Mr K.'s Corona Dashboard"),r.a.createElement(z,null),a.map((function(e){return r.a.createElement(I,{key:e,countrycode:e})})),r.a.createElement(S.Card,{className:"footer"},r.a.createElement("p",null,"Data is from John-Hopkins-University, updated once per day:"," ",r.a.createElement("a",{href:"https://github.com/CSSEGISandData/COVID-19"},"https://github.com/CSSEGISandData/COVID-19")),r.a.createElement("p",null,"Inspired by Inje Lee's article."," ",r.a.createElement("a",{href:"https://itnext.io/develop-the-corona-dashboard-in-a-day-b5f1be41fe33"},"https://itnext.io/develop-the-corona-dashboard-in-a-day-b5f1be41fe33")),r.a.createElement("p",null,"Thanks to Ainize for providing the data API:"," ",r.a.createElement("a",{href:"https://ainize.ai/laeyoung/wuhan-coronavirus-api"},"https://ainize.ai/laeyoung/wuhan-coronavirus-api"))))};var R=function(){return r.a.createElement(L,null)},W=Object(m.a)({reducer:{corona:j}});t(64),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:W},r.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.cc42a8f7.chunk.js.map