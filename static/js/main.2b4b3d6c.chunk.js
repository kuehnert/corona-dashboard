(this["webpackJsonpcorona-meter"]=this["webpackJsonpcorona-meter"]||[]).push([[0],{14:function(e,t,a){e.exports={countryHeader:"CountryData_countryHeader__8c1j8"}},31:function(e,t,a){e.exports={rootContainer:"Dashboard_rootContainer__1HTOq"}},33:function(e,t,a){e.exports=a(66)},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);a(34),a(35),a(36);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),l=a(3),u=a(19),i=a(8),s=a.n(i),d=a(15),m=a(10),v=(a(6),a(11)),f=a.n(v),p=a(68),b=a(69),h=Object(m.b)({name:"corona",initialState:{latestData:null,latestGlobalData:null,historicData:{},deltaData:{},selectedCountries:["DE","GB","US"]},reducers:{fetchLatestDataSuccess:function(e,t){e.latestData=t.payload},fetchLatestGlobalSuccess:function(e,t){e.latestGlobalData=t.payload},fetchCountryHistoricDataSuccess:function(e,t){for(var a=t.payload,n=a.countrycode.iso2,r=a.timeseries,c=new Array(r.length),o=1;o<r.length;o++){var l=r[o-1],u=r[o];c[o]={date:l.date,confirmed:l.confirmed-u.confirmed,deaths:l.deaths-u.deaths,recovered:l.recovered-u.recovered}}e.historicData[n]=a,e.deltaData[n]=c}}}),y=h.actions,E=y.fetchLatestDataSuccess,g=y.fetchLatestGlobalSuccess,j=y.fetchCountryHistoricDataSuccess,D=h.reducer,O=a(32),w=a(9),C=a.n(w),N=a(13),k=a(7),_=a.n(k);var x=function(e){var t,a,n=e.value,c=(e.positiveGood,e.withSign),o=void 0!==c&&c,l=e.percentage,u="";return o&&(u=n&&n>=0?"+":"-"),null==n?t="-":void 0!==l&&l?(a=n,t="".concat(Math.round(1e3*a)/10," %")):t=n.toLocaleString(),r.a.createElement("span",{className:C()({red:"-"===u,green:"+"===u})},u,t)},S=function(e){var t=e.countrycode,a=e.label,c=e.name,o=e.value,u=Object(n.useState)([]),i=Object(O.a)(u,2),s=i[0],d=i[1],m=Object(l.c)((function(e){var a;return null===(a=e.corona.latestData)||void 0===a?void 0:a.find((function(e){return e.countrycode.iso2===t}))})),v=Object(l.c)((function(e){return e.corona.historicData&&e.corona.historicData[t]})),f=Object(l.c)((function(e){return e.corona.historicData&&e.corona.deltaData[t]}));Object(n.useEffect)((function(){if(null!=m&&null!=f&&null!=c){for(var e=new Array(7),t=1;t<7;t++)e.push({date:v.timeseries[t].date,value:v.timeseries[t][c],delta:f[t][c]});d(e)}}),[m,f]);var p=null;return o?p=o:m&&c&&m[c]&&(p=m[c]),r.a.createElement("div",{className:"p-col-6 p-lg-3"},r.a.createElement(N.Card,{className:""},r.a.createElement("div",{className:_.a.label},a),r.a.createElement("div",{className:_.a.number},r.a.createElement(x,{value:p})),s.map((function(e){return r.a.createElement("div",{key:e.date,className:"p-grid"},r.a.createElement("div",{className:C()("p-col-5",_.a.left)},r.a.createElement(x,{value:e.delta,withSign:!0})),r.a.createElement("div",{className:C()("p-col-7",_.a.right)},r.a.createElement(x,{value:e.value})))}))))},G=a(14),H=a.n(G);var M=function(e){var t=e.countrycode,a=Object(l.b)(),c=Object(l.c)((function(e){var a;return null===(a=e.corona.latestData)||void 0===a?void 0:a.find((function(e){return e.countrycode.iso2===t}))}));return Object(n.useEffect)((function(){var e;a((e=t,function(){var t=Object(d.a)(s.a.mark((function t(a,n){var r,c,o,l,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.get("https://wuhan-coronavirus-api.laeyoung.endpoint.ainize.ai/jhu-edu/timeseries?iso2=".concat(e.toUpperCase(),"&onlyCountries=true"));case 3:c=t.sent,o=c.data[0],l=o.timeseries,i=Object.keys(l).map((function(e){var t=p.a(e,"MM/dd/yy",new Date),a=b.a(t,{representation:"date"});return Object(u.a)({date:a},l[e])})).sort((function(e,t){return t.date.localeCompare(e.date)})),r=Object(u.a)({},o,{timeseries:i}),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),console.log("error:",t.t0),t.abrupt("return");case 14:a(j(r));case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()))}),[]),r.a.createElement("div",{className:"ui container"},r.a.createElement("h2",{className:H.a.countryHeader},(null===c||void 0===c?void 0:c.countryregion)||t),r.a.createElement("div",{className:"p-grid"},r.a.createElement(S,{countrycode:t,name:"confirmed",label:"Confirmed"}),r.a.createElement(S,{countrycode:t,name:"recovered",label:"Recovered"}),r.a.createElement(S,{countrycode:t,name:"deaths",label:"Deaths"})))},B=a(31),L=a.n(B),A=function(e){var t=e.label,a=e.name,n=e.value,c=e.percentage,o=Object(l.c)((function(e){return e.corona.latestGlobalData})),u=n||null!=o&&null!=a&&o[a]||null;return r.a.createElement("div",{className:"p-col"},r.a.createElement(N.Card,null,r.a.createElement("div",{className:_.a.label},t),r.a.createElement("div",{className:_.a.number},r.a.createElement(x,{value:u,percentage:c}))))},W=function(){var e=Object(l.c)((function(e){return e.corona.latestGlobalData}));return r.a.createElement("div",{className:"ui container"},r.a.createElement("h2",{className:H.a.countryHeader},"World-Wide"),r.a.createElement("div",{className:"p-grid"},r.a.createElement(A,{label:"Confirmed",name:"confirmed"}),r.a.createElement(A,{label:"Recovered",name:"recovered"}),r.a.createElement(A,{label:"Deaths",name:"deaths"}),r.a.createElement(A,{label:"Fatality Rate",value:e&&e.deaths/e.confirmed||null,percentage:!0})))},z=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.corona})).selectedCountries;return Object(n.useEffect)((function(){e(function(){var e=Object(d.a)(s.a.mark((function e(t,a){var n,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().corona.selectedCountries,r=n.map((function(e){return f.a.get("https://wuhan-coronavirus-api.laeyoung.endpoint.ainize.ai/jhu-edu/latest?iso2=".concat(e,"&onlyCountries=true"))})),c=[],e.prev=3,e.next=6,f.a.all(r);case 6:o=e.sent,c=o.map((function(e){return e.data[0]})),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(3),console.log("error:",e.t0),e.abrupt("return");case 14:t(E(c));case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,a){return e.apply(this,arguments)}}()),e(function(){var e=Object(d.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("https://wuhan-coronavirus-api.laeyoung.endpoint.ainize.ai/jhu-edu/brief");case 3:n=e.sent,a=n.data,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),console.log("error:",e.t0),e.abrupt("return");case 11:t(g(a));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.createElement("div",{className:L.a.rootContainer},r.a.createElement("h1",null,"Mr K.'s Corona Dashboard"),r.a.createElement(W,null),t.map((function(e){return r.a.createElement(M,{key:e,countrycode:e})})))};var R=function(){return r.a.createElement(z,null)},J=Object(m.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),U=J.actions,q=(U.increment,U.decrement,U.incrementByAmount,J.reducer),F=Object(m.a)({reducer:{corona:D,counter:q}});a(65),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:F},r.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports={number:"NumberCard_number__1rkk8",left:"NumberCard_left__1bkGy",right:"NumberCard_right__teMx2"}}},[[33,1,2]]]);
//# sourceMappingURL=main.2b4b3d6c.chunk.js.map